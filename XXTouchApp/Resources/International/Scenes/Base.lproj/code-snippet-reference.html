<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" type="text/css" href="../style.css"><title>XXTouch Code Snippet Reference</title></head><body><h1>XXTouch Code Snippet Reference</h1><p>Compatible with: XXTouchApp v1.1.0</p><p>This reference gives introduction to &quot;Code Snippet&quot; in XXTouch and using &quot;Replace Flag&quot; to custom your code templates.</p><p>When choosing &quot;Code Snippet&quot;, XXTouch will check the &quot;Replace Flag&quot; in code templates, and push pickers relatively in a certain order. &quot;Replace Flag&quot; could be used multiple times in a certain code template.</p><h2>Default Caret Position</h2><h3>Keyword</h3><p>@@</p><h3>Description<br>Before the code snippet being inserted into the Lua file, XXTouch will move the caret to the position of the keyword.</h3><h2>Application Picker</h2><h3>Keyword</h3><p>@app@</p><h3>Description</h3><p>Shows an application picker that contains all applications on main screen, and replace the keyword with the bundle id (bid). The bundle id does not contain any quotes, if any, it will be escaped prepending a backslash (\).</p><h3>Example</h3><p><em>app.run(&quot;@bid@&quot;)</em></p><p>-&gt; <em>app.run(&quot;com.apple.iBooks&quot;)</em></p><h2>Key Event Picker</h2><h3>Keyword</h3><p>@key@</p><h3>Description</h3><p>Shows a key event picker that contains all frequently used key events, and replace the keyword with the key event id for XXTouch.</p><h3>Example</h3><p><em>key.press(&quot;@key@&quot;)</em></p><p>-&gt; <em>key.press(&quot;HOMEBUTTON&quot;)</em></p><h2>Location Picker</h2><h3>Keyword</h3><p>@loc@</p><h3>Description</h3><p>Shows a location picker with built-in Map-Kit, which includes a draggable pin selector. There will be a callout above that selector. Tap the callout to replace the keyword with the location where the pin selector indicates, and the location will be represented as latitude and longitude.</p><h3>Example</h3><p><em>gps.fake(&quot;com.xxtouch.XXTouchApp&quot;, @loc@)</em></p><p>-&gt; <em>gps.fake(&quot;com.xxtouch.XXTouchApp&quot;, 39.919998, 116.459999)</em></p><h2>Coordinate Picker</h2><h3>Keyword</h3><p>@pos@</p><h3>Description</h3><p>Shows a canvas view controller. Choose an image from system album, then drag, rotate, zoom it. Additionally, user can place an annotation on that image. Tap &quot;Next&quot; button to replace the keyword with the coordinate (x, y) where the annotation indicates.</p><h3>Example</h3><p><em>touch.tap(@pos@)</em></p><p>-&gt; <em>touch.tap(212, 962)</em></p><h2>Color Picker</h2><h3>Keyword</h3><p>@color@</p><h3>Description</h3><p>Shows a canvas view controller. Choose an image from system album, then drag, rotate, zoom it. Additionally, user can place an annotation on that image. Tap &quot;Next&quot; button to replace the keyword with the hex color where the annotation indicates.</p><h3>Example</h3><pre><code>if screen.get_color(512, 133) == @color@ then
    touch.tap(512, 133)
    end
</code></pre><p>-&gt;</p><pre><code>if screen.get_color(512, 133) == 0xffffff then
    touch.tap(512, 133)
    end
</code></pre><h2>Position &amp; Color Picker</h2><h3>Keyword</h3><p>@poscolor@, @poscolors@</p><h3>Description</h3><p>Shows a canvas view controller. Choose an image from system album, then drag, rotate, zoom it. Additionally, user can place several annotations on that image. Tap &quot;Next&quot; button to replace the keyword with the coordinates (x, y) and the corresponding hex colors where these annotations indicate.</p><h3>Example</h3><pre><code>local x, y = screen.find_color(@poscolors@, 90)
</code></pre><p>-&gt;</p><pre><code>local x, y = screen.find_color({
    {992, 2110, 0xff5000},
    {1172, 2128, 0xff5000},
    {1095, 2122, 0xffffff},
    {1026, 2161, 0xff5000},
    }, 90)
</code></pre><h3>Note</h3><p><strong>@poscolor@</strong> will allow user to place only one annotation on the image, and it will be replaced with the format <em>x, y, color</em>. While <strong>@poscolors@</strong> will allows user to place several annotations, and it will be replaced with the format of an array.</p><h2>Rectangle Picker</h2><h3>Keyword</h3><p>@rect@</p><h3>Description</h3><p>Shows a canvas view controller. Choose an image from system album, then drag, rotate, zoom it. Additionally, user can select a rectangle on that image. Tap &quot;Next&quot; button to replace the keyword with the coordinates of the top-left corner and the bottom-right corner.</p><h3>Example</h3><p><em>screen.ocr_text(@rect@)</em></p><p>-&gt; <em>screen.ocr_text(173, 177, 907, 1774)</em></p></body></html>
